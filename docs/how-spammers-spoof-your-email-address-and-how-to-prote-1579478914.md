# 垃圾邮件发送者如何欺骗您的电子邮件地址(以及如何保护自己)

> 原文:[https://life hacker . com/how-spammers-spoof-your-email-address-and-how-to-prote-1579478914](https://lifehacker.com/how-spammers-spoof-your-email-address-and-how-to-prote-1579478914)

当我们看到垃圾邮件时，我们大多数人都知道它，但是在我们的收件箱中看到来自朋友——或者更糟，来自我们自己——的陌生电子邮件是非常令人不安的。如果你看到一封看起来像是朋友发来的邮件，并不意味着他们被黑了。垃圾邮件发送者一直在欺骗这些地址，这并不难做到。以下是他们如何做到这一点，以及你如何保护自己。

Watch

垃圾邮件发送者长期以来一直在欺骗电子邮件地址。几年前，他们曾经从感染了恶意软件的电脑上获取联系人列表。今天的数据窃贼仔细选择他们的目标，用看起来像是来自朋友、可靠来源甚至是他们自己的帐户的邮件来钓鱼。

事实证明，欺骗真实的电子邮件地址出奇的容易，这也是为什么网络钓鱼是一个大问题的部分原因。系统工程师、有抱负的 CISSP 和 Lifehacker 的读者马修向我们透露了它是如何工作的，但也让我们感到惊讶的是，他从其他 Lifehacker 作者的电子邮件地址给 Lifehacker 的一些人发了电子邮件。尽管我们知道这是可能的——我们以前都收到过垃圾邮件——但实际上被它欺骗更令人不安。所以，我们和他谈论了他是如何做到的，以及人们可以做些什么来保护自己。

注意:下面是一篇相当技术性的文章，是为更懂计算机的人设计的。如果你想要一个关于避免垃圾邮件和诈骗的更基本的纲要， [*我们已经有一个了*](https://lifehacker.com/the-complete-guide-to-avoiding-online-scams-for-your-l-5420356) *。*

### 一点历史:为什么电子邮件地址如此容易被欺骗

今天，大多数电子邮件提供商已经解决了垃圾邮件问题——至少让他们自己满意。Gmail 和 Outlook 拥有强大、复杂的垃圾邮件捕捉算法和强大的过滤工具。然而，在 21 世纪初，情况并非如此。垃圾邮件仍然是邮件服务器必须认真解决的一个大问题，更不用说开发先进的工具来管理了。

在 2003 年， [孟翁翁](http://en.wikipedia.org/wiki/Meng_Weng_Wong) 提出了一种邮件服务器“验证”发送邮件的 IP 地址(在互联网上标识计算机的唯一号码)是否被授权代表特定域发送邮件的方法。它被称为 [发件人许可表](http://en.wikipedia.org/wiki/Sender_Policy_Framework)(2004 年更名为“发件人政策框架”)，Matthew 解释了它的工作原理:

> 每次发送电子邮件时，接收电子邮件的服务器都会将邮件的原始 IP 地址与电子邮件地址主机的 SPF 记录中列出的 IP 地址(“@example.com”部分)进行比较。)
> 
> 如果两个 IP 地址匹配，那么电子邮件可以传递给预定的收件人。如果 IP 地址不匹配，那么该电子邮件将被标记为垃圾邮件或被完全拒绝。决定结果的负担完全在接收服务器的手中。
> 
> 这些年来，SPF 记录不断演变(最近的 RFC 是 2014 年 4 月 发布的 [)，互联网上大多数域名都有 SPF 记录(你可以](http://tools.ietf.org/html/rfc7208) [在这里](http://www.kitterman.com/spf/validate.html) 搜索)。

当你注册一个域名时，你也同时注册了大量的域名系统记录。这些记录告诉世界，根据计算机想要做的事情(电子邮件、web、FTP 等等)，与哪些计算机进行对话。SPF 记录就是一个例子，理想情况下，它将确保互联网上的所有邮件服务器都知道从@lifehacker.com 发送电子邮件的人实际上是授权用户*和*计算机。

然而，这种方法并不完美，这也是它没有完全流行起来的部分原因。SPF 记录需要管理—实际上有人添加新的 IP 地址和删除旧的 IP 地址，并且每次发生更改时，需要时间让记录在互联网上传播。(*更新*:我们之前将 SPF 检查绑定到用户 IP 地址，当邮件主机实际使用该技术来验证邮件通过的服务器是代表给定域的授权发送者，而不是使用的*设备*被授权代表给定地址发送时。抱歉造成混乱，感谢指出这一点的评论者！)反正大部分公司用的都是软版 SPF。他们不是通过阻止有用邮件来冒误报的风险，而是实现“硬”和“软”失败。电子邮件主机也放松了对未通过检查的邮件的处理限制。因此，企业更容易管理电子邮件，但网络钓鱼也很容易，而且是一个大问题。

然后，在 2012 年，引入了一种新的记录类型，旨在与 SPF 一起工作。它被称为 DMARC，或 [基于域的消息认证、报告和一致性](http://en.wikipedia.org/wiki/DMARC) 。单年之后就扩大到保护 [大量消费者邮箱](http://www.dmarc.org/news/press_release_20130206.html) (虽然自称的 60%大概是乐观的。)马修解释了细节:

> DMARC 归结为两个重要的标志(虽然总共有 10 个)——“p”标志，它指示接收服务器如何处理潜在的假冒电子邮件，通过拒绝、隔离或通过；以及“rua”标志，它告诉接收服务器可以向哪里发送失败消息的报告(通常是域管理员安全组的电子邮件地址)。DMARC 记录解决了 SPF 记录的大部分问题，它把决定如何回应的负担从接收者身上拿走了。
> 
> 问题是，还不是每个人都使用 DMARC。
> 
> [这个方便的工具](https://dmarcian.com/dmarc-inspector/) 允许你查询任何域名的 DMARC 记录——在你喜欢的几个域名上试试(gawker.com，whitehouse.gov，redcross.org，reddit.com)。注意到什么了吗？他们都没有发表过 DMARC 的记录。这意味着任何试图遵守 DMARC 规则的电子邮件主机都不会有任何关于如何处理 SPF 失败电子邮件的指示，并且可能会让它们通过。这就是谷歌对 Gmail(和谷歌应用程序)所做的，这就是为什么虚假邮件可以进入你的收件箱。
> 
> 为了证明谷歌确实关注 DMARC 记录，看看 facebook.com 的 DMARC 记录——“p”标志表示收件人应该拒绝电子邮件，并向脸书的邮政局长提交报告。现在试着伪造一封来自 facebook.com 的邮件，发送到一个 Gmail 地址——不会成功的。现在来看看 fb.com 的 DMARC 记录——它表明不应该拒绝任何电子邮件，但无论如何都应该提交报告。如果你测试它，来自@fb.com 的邮件会通过。

马修还指出，“邮政局长报告”不是开玩笑的。当他试图用 DMARC 记录欺骗一个域时，他的 SMTP 服务器在不到 24 小时内就被阻止了。在我们的测试中，我们注意到了同样的情况。如果域名设置正确，他们会很快结束这些欺骗信息，或者至少在欺骗者使用不同的 IP 地址之前。然而，一个没有 DMARC 记录的域名是公平的。您可以欺骗他们几个月，而发送端没有人会注意到—这取决于接收邮件的提供商来保护他们的用户(要么根据内容将邮件标记为垃圾邮件，要么根据邮件未通过的 SPF 检查。)

### 垃圾邮件制造者如何欺骗电子邮件地址

伪造电子邮件地址所需的工具出奇地容易获得。你所需要的只是一个正常工作的 SMTP 服务器(也就是可以发送电子邮件的服务器)，以及合适的邮件软件。

任何一个好的网络主机都会给你提供一个 SMTP 服务器。(您也可以在自己的系统上安装 SMTP，端口 25——用于发送电子邮件的端口，通常被 ISP 封锁。这是专门为了避免我们在 21 世纪初看到的那种大量发送电子邮件的恶意软件。)为了对我们恶作剧，马修用了 [PHP Mailer](https://github.com/Synchro/PHPMailer) 。它易于理解，易于安装，甚至还有一个网络界面。打开 PHP 邮件程序，编写你的邮件，输入“发件人”和“收件人”地址，然后点击发送。在收件人方面，他们会在收件箱中收到一封电子邮件，看起来像是来自您键入的地址。马修解释道:

> 这封邮件应该没有问题，而且看起来是你所说的那个人发来的。很少有迹象表明这不是来自他们的收件箱，除非你查看邮件的源代码(Gmail 中的“查看原件”选项)。[编辑注:见上图]
> 
> 你会注意到电子邮件“soft”没有通过 SPF 检查，但它还是进入了收件箱。同样重要的是要注意，源代码包括电子邮件的原始 IP 地址，所以如果收件人愿意，电子邮件是有可能被跟踪的。
> 
> 在这一点上需要注意的是，对于电子邮件主机如何处理 SPF 故障仍然没有一个标准。我大部分测试使用的主机 Gmail 允许电子邮件进入。然而，Outlook.com 没有发出一封伪造的电子邮件，无论是软的还是硬的都失败了。我公司的 Exchange 服务器毫无问题地让它们进入，我的家庭服务器(OS X)接受了它们，但将它们标记为垃圾邮件。

这就是全部了。我们浏览了一些细节，但不多。这里最大的警告是，如果你点击欺骗邮件上的回复，任何发送回来的信息都会被发送到地址的真正拥有者那里——而不是欺骗者。但这对小偷来说无关紧要，因为垃圾邮件发送者和网络钓鱼者只是希望你点击链接或打开附件。

权衡是显而易见的:由于 SPF 从未真正以预期的方式流行起来，你不需要在每次旅行时将设备的 IP 地址添加到列表中并等待 24 小时，或者想从新的智能手机发送电子邮件。然而，这也意味着网络钓鱼仍然是一个主要问题。最糟糕的是，这太简单了，任何人都可以做到。

### 你能做些什么来保护自己

这一切可能看起来很神秘，或者看起来像是对几封垃圾邮件的大惊小怪。毕竟，当我们看到垃圾邮件时，大多数人都知道它——如果我们曾经看到过的话。但事实是，对于每一个标记了这些邮件的帐户，都有另一个帐户没有标记这些邮件，钓鱼邮件会进入用户的收件箱。

Matthew 向我们解释说，他过去常常与朋友一起恶搞地址，只是为了恶作剧朋友，给他们一点惊吓——就像老板对他们很生气，或者接待员发电子邮件说他们的车被拖走了——但他意识到这有点太好了，即使是在公司网络之外。欺骗邮件来自公司的邮件服务器，包括个人资料图片、公司即时消息状态、自动填充的联系信息等等，所有这些都是由邮件服务器添加的，所有这些都使欺骗邮件看起来合法。当我测试这个过程时，没费多少功夫，我就在收件箱里看到了自己的脸在看着我，或者是惠特森的，甚至是亚当·达奇斯的，他甚至连一个 Lifehacker 的邮箱地址都没有了。

更糟糕的是，辨别邮件不是来自看上去的那个人的唯一方法是挖掘邮件标题，知道你在找什么(就像我们上面描述的那样)。)即使对我们这些精通技术的人来说，这也是一个相当高的要求——谁会在繁忙的工作日中有时间做这些呢？即使是快速回复这封被欺骗的邮件也只会造成混乱。这是一个完美的方式来造成一点混乱或针对个人，让他们妥协自己的电脑或放弃登录信息。但是如果你看到一些甚至有点可疑的东西，你的武器库中至少还有一个工具。

因此，如果你想保护你的收件箱免受这类邮件的侵扰，你可以做几件事:

*   **打开你的垃圾邮件过滤器，** [**使用类似优先收件箱**](http://lifehacker.com/gmails-priority-inbox-is-awesome-just-give-it-a-chance-5992588) 的工具。将你的垃圾邮件过滤器设置得更强一点，可能会使一封没有通过 SPF 检查的邮件成为垃圾邮件还是进入你的收件箱，这取决于你的邮件提供商。同样，如果你能使用 Gmail 的优先收件箱或苹果的 VIP 等服务，你基本上就让邮件服务器为你找出了重要的人。如果一个重要的人被欺骗，你仍然会得到它。
*   **学习读取消息头，追踪 IP 地址**。我们在 [这篇关于追踪垃圾邮件来源](http://lifehacker.com/how-can-i-find-out-why-my-email-account-just-spammed-my-5875848) 的帖子中解释了如何做到这一点，这是一个很好的技能。当一封可疑的电子邮件进来时，你可以打开邮件头，查看发件人的 IP 地址，并查看它是否与同一个人以前的电子邮件相匹配。你甚至可以对发件人的 IP 地址进行反向查找，看看它在哪里——这可能会提供信息，也可能不会提供信息，但如果你收到一封发自俄罗斯、来自城市另一端的朋友的电子邮件(他们没有在旅行)，你就知道出事了。
*   **切勿点击不熟悉的链接或下载不熟悉的附件**。这看起来似乎是显而易见的，但只需要公司的一名员工看到他们老板或公司其他人发来的消息，打开附件或点击一个有趣的谷歌文档链接，就可以暴露整个公司网络。我们中的许多人认为我们不屑于被这样欺骗，但这种事情经常发生。注意你收到的信息，不要点击电子邮件中的链接(直接进入你的银行、有线电视公司或其他网站，登录找到他们想让你看到的内容)，不要下载你不希望看到的电子邮件附件。让您的计算机的反恶意软件保持最新。
*   **如果你管理自己的电子邮件，审计它，看看它如何回应 SPF 和 DMARC 记录**。你也许可以问你的网络主机这个问题，但是使用我们上面描述的相同的欺骗方法，你自己检查并不难。或者，检查您的垃圾邮件文件夹，您可能会在其中看到来自您自己或您认识的人的邮件。询问你的网络主机，他们是否可以改变你的 SMTP 服务器的配置方式，或者考虑将邮件服务切换到类似 Google Apps 的服务上。
*   **如果你拥有自己的域名，为其提交 DMARC 记录**。马修解释说，你可以控制自己想变得有多激进，但是 [会仔细阅读如何提交 DMARC 记录](http://www.dmarc.org/faq.html) 并通过域名注册商更新你的记录。如果你不确定怎么做，他们应该能帮上忙。如果您在公司帐户上收到欺骗邮件，请告知您的公司 IT 部门。他们可能有不提交 DMARC 记录的理由(Matthew 解释说他们不能，因为他们有需要使用公司域发送的外部服务——这很容易解决，但这种想法是问题的一部分)，但至少你让他们知道。

* * *

一如既往，安全方面最薄弱的环节是最终用户。这意味着，每当你收到一封意想不到的电子邮件时，你都需要将你的 BS 传感器一直打开。自我教育。让你的反恶意软件保持最新。最后，请密切关注此类问题，因为随着我们继续打击垃圾邮件和网络钓鱼，它们还会继续发展。

*<small>照片由</small>* [*<small>格温妮丝</small>*](https://www.flickr.com/photos/info_grrl/13956232355/) *<small>。</small>T15】*